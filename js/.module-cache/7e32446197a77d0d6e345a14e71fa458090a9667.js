var UserForm = React.createClass({displayName: "UserForm",
	getInitialState: function() {
		var check_logged = function(){
			if(sessionStorage.getItem("token") == null){
				return {
					logged_in: false
				}

			}

			token = atob(sessionStorage.getItem("token").split(".")[1])
			if(token.user_id != -1){
				li = false;
			}else{
				li = true;
			}
			
			return({
				logged_in: li ,
				username: ""
			})
		}
		var state = check_logged()
		state.reg_popup = "hidden"
		state.alert_msg = ""
		return state

	},
	login: function(){
		done = this.logged_in
		error = this.error
		superagent.post("/api/login/").send(this.props.data).end(function(res){
			if(res.status != 200){
				error("грешка в сървъра")
			}
			out = JSON.parse(atob(res.text.split(".")[1]))
			console.log(out)
			if(out.user_id > -1){
				sessionStorage.setItem("token",res.text)
				done()	
			}else{
				error("грешно потребителско име и/или парола")
			}
		});
	},
	error: function(msg){
			this.setState({alert_msg: msg})
			
	},
	logged_in: function(){
		this.setState({ logged_in : true, username: this.props.data.name })
	},
	logout: function(){
		sessionStorage.removeItem("token")
		this.setState({ logged_in : false})

	},
	signup: function(){
		this.setState({reg_popup:"visible"})

	},
	render: function () {
		var data = this.props.data
		if(this.state.logged_in == false){
			
				Panel = (React.createElement("div", null, 
							React.createElement(StringInput, {placeholder: "Потребителско име", value: data, bind: "name"}), 
							React.createElement(Md5Input, {placeholder: "Парола", value: data, bind: "pass"}), 
							React.createElement("div", {className: "myButton", onClick: this.login}, "Вход"), 
							React.createElement("div", {className: "myButton", onClick: this.signup}, "Регистрация"), 
							React.createElement(Alert, {error_message: this.state.alert_msg}), 
							React.createElement(RegisterForm, {visability: this.state.reg_popup})
						))
			
		}else{
			
				Panel = React.createElement("div", null, React.createElement("span", null, this.state.username), React.createElement("div", {className: "myButton", onClick: this.logout}, "изход"))
		}

		return (
			React.createElement("div", null, 
				Panel
			)
		)
	}
});

var Alert = React.createClass({displayName: "Alert",
	componentDidUpdate:function(old,news){
		alert_box = this.refs.alert_box.getDOMNode()
		alert_box.classList.add("alert_show")
		setTimeout(this.hide,1500)
	},
	hide:function(){
		alert_box = this.refs.alert_box.getDOMNode()
		alert_box.classList.remove("alert_show")
	},
	render: function(){
 		return (React.createElement("div", {className: "alert", ref: "alert_box"}, this.props.error_message))

	}

})

var RegisterForm = React.createClass({displayName: "RegisterForm",
	model: {
		username: "",
		password:"",
		pr:""
	},
	register: function(){
		if(this.model.password == this.model.pr){
			this.model.password = md5(this.model.pr)
			console.log(this.model)
			delete this.model.pr
			superagent.post("/api/signup/").send(this.model).end(function(res){
				alert("Вие се регистрирахте.")

			});
			console.log(this.model)
		}
	},

	render: function(){

	return(
		React.createElement("div", {className: "popup", style: {visibility: this.props.visability}}, 
			
			React.createElement(StringInput, {value: this.model, bind: "username", placeholder: "Пoтребителско име"}), 
			React.createElement(PassInput, {value: this.model, bind: "password", placeholder: "Парола"}), 
			React.createElement(PassInput, {value: this.model, bind: "pr", placeholder: "Поватряне на парола"}), 
			React.createElement("div", {className: "myButton", onClick: this.register}, "Регистрирай")
		))
	}
})
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHJhbnNmb3JtZWQuanMiLCJzb3VyY2VzIjpbbnVsbF0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLElBQUksOEJBQThCLHdCQUFBO0NBQ2pDLGVBQWUsRUFBRSxXQUFXO0VBQzNCLElBQUksWUFBWSxHQUFHLFVBQVU7R0FDNUIsR0FBRyxjQUFjLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxJQUFJLElBQUksQ0FBQztJQUMxQyxPQUFPO0tBQ04sU0FBUyxFQUFFLEtBQUs7QUFDckIsS0FBSzs7QUFFTCxJQUFJOztHQUVELEtBQUssR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7R0FDM0QsR0FBRyxLQUFLLENBQUMsT0FBTyxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQ3RCLEVBQUUsR0FBRyxLQUFLLENBQUM7SUFDWCxJQUFJO0lBQ0osRUFBRSxHQUFHLElBQUksQ0FBQztBQUNkLElBQUk7O0dBRUQsT0FBTztJQUNOLFNBQVMsRUFBRSxFQUFFO0lBQ2IsUUFBUSxFQUFFLEVBQUU7SUFDWixDQUFDO0dBQ0Y7RUFDRCxJQUFJLEtBQUssR0FBRyxZQUFZLEVBQUU7RUFDMUIsS0FBSyxDQUFDLFNBQVMsR0FBRyxRQUFRO0VBQzFCLEtBQUssQ0FBQyxTQUFTLEdBQUcsRUFBRTtBQUN0QixFQUFFLE9BQU8sS0FBSzs7RUFFWjtDQUNELEtBQUssRUFBRSxVQUFVO0VBQ2hCLElBQUksR0FBRyxJQUFJLENBQUMsU0FBUztFQUNyQixLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUs7RUFDbEIsVUFBVSxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsU0FBUyxHQUFHLENBQUM7R0FDckUsR0FBRyxHQUFHLENBQUMsTUFBTSxJQUFJLEdBQUcsQ0FBQztJQUNwQixL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QUEsRUFBSSxDQUFDLElBQUEsRUFBSSxDQUFDLFdBQUEsRUFBVyxDQUFDLHFCQUFxQixDQUFFLENBQUEsRUFBQTtHQUMzRSxvQkFBQSxLQUFJLEVBQUEsQ0FBQSxDQUFDLFNBQUEsRUFBUyxDQUFDLFVBQUEsRUFBVSxDQUFDLE9BQUEsRUFBTyxDQUFFLElBQUksQ0FBQyxRQUFVLENBQUEsRUFBQSxhQUFpQixDQUFBO0VBQzlELENBQUEsQ0FBQztFQUNQO0NBQ0QiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgVXNlckZvcm0gPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG5cdGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGNoZWNrX2xvZ2dlZCA9IGZ1bmN0aW9uKCl7XG5cdFx0XHRpZihzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKFwidG9rZW5cIikgPT0gbnVsbCl7XG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0bG9nZ2VkX2luOiBmYWxzZVxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdFx0dG9rZW4gPSBhdG9iKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oXCJ0b2tlblwiKS5zcGxpdChcIi5cIilbMV0pXG5cdFx0XHRpZih0b2tlbi51c2VyX2lkICE9IC0xKXtcblx0XHRcdFx0bGkgPSBmYWxzZTtcblx0XHRcdH1lbHNle1xuXHRcdFx0XHRsaSA9IHRydWU7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdHJldHVybih7XG5cdFx0XHRcdGxvZ2dlZF9pbjogbGkgLFxuXHRcdFx0XHR1c2VybmFtZTogXCJcIlxuXHRcdFx0fSlcblx0XHR9XG5cdFx0dmFyIHN0YXRlID0gY2hlY2tfbG9nZ2VkKClcblx0XHRzdGF0ZS5yZWdfcG9wdXAgPSBcImhpZGRlblwiXG5cdFx0c3RhdGUuYWxlcnRfbXNnID0gXCJcIlxuXHRcdHJldHVybiBzdGF0ZVxuXG5cdH0sXG5cdGxvZ2luOiBmdW5jdGlvbigpe1xuXHRcdGRvbmUgPSB0aGlzLmxvZ2dlZF9pblxuXHRcdGVycm9yID0gdGhpcy5lcnJvclxuXHRcdHN1cGVyYWdlbnQucG9zdChcIi9hcGkvbG9naW4vXCIpLnNlbmQodGhpcy5wcm9wcy5kYXRhKS5lbmQoZnVuY3Rpb24ocmVzKXtcblx0XHRcdGlmKHJlcy5zdGF0dXMgIT0gMjAwKXtcblx0XHRcdFx0ZXJyb3IoXCLQs9GA0LXRiNC60LAg0LIg0YHRitGA0LLRitGA0LBcIilcblx0XHRcdH1cblx0XHRcdG91dCA9IEpTT04ucGFyc2UoYXRvYihyZXMudGV4dC5zcGxpdChcIi5cIilbMV0pKVxuXHRcdFx0Y29uc29sZS5sb2cob3V0KVxuXHRcdFx0aWYob3V0LnVzZXJfaWQgPiAtMSl7XG5cdFx0XHRcdHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oXCJ0b2tlblwiLHJlcy50ZXh0KVxuXHRcdFx0XHRkb25lKClcdFxuXHRcdFx0fWVsc2V7XG5cdFx0XHRcdGVycm9yKFwi0LPRgNC10YjQvdC+INC/0L7RgtGA0LXQsdC40YLQtdC70YHQutC+INC40LzQtSDQuC/QuNC70Lgg0L/QsNGA0L7Qu9CwXCIpXG5cdFx0XHR9XG5cdFx0fSk7XG5cdH0sXG5cdGVycm9yOiBmdW5jdGlvbihtc2cpe1xuXHRcdFx0dGhpcy5zZXRTdGF0ZSh7YWxlcnRfbXNnOiBtc2d9KVxuXHRcdFx0XG5cdH0sXG5cdGxvZ2dlZF9pbjogZnVuY3Rpb24oKXtcblx0XHR0aGlzLnNldFN0YXRlKHsgbG9nZ2VkX2luIDogdHJ1ZSwgdXNlcm5hbWU6IHRoaXMucHJvcHMuZGF0YS5uYW1lIH0pXG5cdH0sXG5cdGxvZ291dDogZnVuY3Rpb24oKXtcblx0XHRzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKFwidG9rZW5cIilcblx0XHR0aGlzLnNldFN0YXRlKHsgbG9nZ2VkX2luIDogZmFsc2V9KVxuXG5cdH0sXG5cdHNpZ251cDogZnVuY3Rpb24oKXtcblx0XHR0aGlzLnNldFN0YXRlKHtyZWdfcG9wdXA6XCJ2aXNpYmxlXCJ9KVxuXG5cdH0sXG5cdHJlbmRlcjogZnVuY3Rpb24gKCkge1xuXHRcdHZhciBkYXRhID0gdGhpcy5wcm9wcy5kYXRhXG5cdFx0aWYodGhpcy5zdGF0ZS5sb2dnZWRfaW4gPT0gZmFsc2Upe1xuXHRcdFx0XG5cdFx0XHRcdFBhbmVsID0gKDxkaXY+XG5cdFx0XHRcdFx0XHRcdDxTdHJpbmdJbnB1dCBwbGFjZWhvbGRlcj1cItCf0L7RgtGA0LXQsdC40YLQtdC70YHQutC+INC40LzQtVwiIHZhbHVlPXtkYXRhfSBiaW5kPVwibmFtZVwiIC8+XG5cdFx0XHRcdFx0XHRcdDxNZDVJbnB1dCBwbGFjZWhvbGRlcj1cItCf0LDRgNC+0LvQsFwiIHZhbHVlPXtkYXRhfSBiaW5kPVwicGFzc1wiIC8+XG5cdFx0XHRcdFx0XHRcdDxkaXYgY2xhc3NOYW1lPVwibXlCdXR0b25cIiBvbkNsaWNrPXt0aGlzLmxvZ2lufT7QktGF0L7QtDwvZGl2PlxuXHRcdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzTmFtZT1cIm15QnV0dG9uXCIgb25DbGljaz17dGhpcy5zaWdudXB9PtCg0LXQs9C40YHRgtGA0LDRhtC40Y88L2Rpdj5cblx0XHRcdFx0XHRcdFx0PEFsZXJ0IGVycm9yX21lc3NhZ2U9e3RoaXMuc3RhdGUuYWxlcnRfbXNnfS8+XG5cdFx0XHRcdFx0XHRcdDxSZWdpc3RlckZvcm0gdmlzYWJpbGl0eT17dGhpcy5zdGF0ZS5yZWdfcG9wdXB9Lz5cblx0XHRcdFx0XHRcdDwvZGl2Pilcblx0XHRcdFxuXHRcdH1lbHNle1xuXHRcdFx0XG5cdFx0XHRcdFBhbmVsID0gPGRpdj48c3Bhbj57dGhpcy5zdGF0ZS51c2VybmFtZX08L3NwYW4+PGRpdiBjbGFzc05hbWU9XCJteUJ1dHRvblwiIG9uQ2xpY2s9e3RoaXMubG9nb3V0fT7QuNC30YXQvtC0PC9kaXY+PC9kaXY+XG5cdFx0fVxuXG5cdFx0cmV0dXJuIChcblx0XHRcdDxkaXY+XG5cdFx0XHRcdHtQYW5lbH1cblx0XHRcdDwvZGl2PlxuXHRcdClcblx0fVxufSk7XG5cbnZhciBBbGVydCA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcblx0Y29tcG9uZW50RGlkVXBkYXRlOmZ1bmN0aW9uKG9sZCxuZXdzKXtcblx0XHRhbGVydF9ib3ggPSB0aGlzLnJlZnMuYWxlcnRfYm94LmdldERPTU5vZGUoKVxuXHRcdGFsZXJ0X2JveC5jbGFzc0xpc3QuYWRkKFwiYWxlcnRfc2hvd1wiKVxuXHRcdHNldFRpbWVvdXQodGhpcy5oaWRlLDE1MDApXG5cdH0sXG5cdGhpZGU6ZnVuY3Rpb24oKXtcblx0XHRhbGVydF9ib3ggPSB0aGlzLnJlZnMuYWxlcnRfYm94LmdldERPTU5vZGUoKVxuXHRcdGFsZXJ0X2JveC5jbGFzc0xpc3QucmVtb3ZlKFwiYWxlcnRfc2hvd1wiKVxuXHR9LFxuXHRyZW5kZXI6IGZ1bmN0aW9uKCl7XG4gXHRcdHJldHVybiAoPGRpdiBjbGFzc05hbWU9XCJhbGVydFwiIHJlZj1cImFsZXJ0X2JveFwiPnt0aGlzLnByb3BzLmVycm9yX21lc3NhZ2V9PC9kaXY+KVxuXG5cdH1cblxufSlcblxudmFyIFJlZ2lzdGVyRm9ybSA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcblx0bW9kZWw6IHtcblx0XHR1c2VybmFtZTogXCJcIixcblx0XHRwYXNzd29yZDpcIlwiLFxuXHRcdHByOlwiXCJcblx0fSxcblx0cmVnaXN0ZXI6IGZ1bmN0aW9uKCl7XG5cdFx0aWYodGhpcy5tb2RlbC5wYXNzd29yZCA9PSB0aGlzLm1vZGVsLnByKXtcblx0XHRcdHRoaXMubW9kZWwucGFzc3dvcmQgPSBtZDUodGhpcy5tb2RlbC5wcilcblx0XHRcdGNvbnNvbGUubG9nKHRoaXMubW9kZWwpXG5cdFx0XHRkZWxldGUgdGhpcy5tb2RlbC5wclxuXHRcdFx0c3VwZXJhZ2VudC5wb3N0KFwiL2FwaS9zaWdudXAvXCIpLnNlbmQodGhpcy5tb2RlbCkuZW5kKGZ1bmN0aW9uKHJlcyl7XG5cdFx0XHRcdGFsZXJ0KFwi0JLQuNC1INGB0LUg0YDQtdCz0LjRgdGC0YDQuNGA0LDRhdGC0LUuXCIpXG5cblx0XHRcdH0pO1xuXHRcdFx0Y29uc29sZS5sb2codGhpcy5tb2RlbClcblx0XHR9XG5cdH0sXG5cblx0cmVuZGVyOiBmdW5jdGlvbigpe1xuXG5cdHJldHVybihcblx0XHQ8ZGl2IGNsYXNzTmFtZT1cInBvcHVwXCIgc3R5bGU9e3t2aXNpYmlsaXR5OiB0aGlzLnByb3BzLnZpc2FiaWxpdHl9fT5cblx0XHRcdFxuXHRcdFx0PFN0cmluZ0lucHV0IHZhbHVlPXt0aGlzLm1vZGVsfSBiaW5kPVwidXNlcm5hbWVcIiBwbGFjZWhvbGRlcj1cItCfb9GC0YDQtdCx0LjRgtC10LvRgdC60L4g0LjQvNC1XCIvPlxuXHRcdFx0PFBhc3NJbnB1dCB2YWx1ZT17dGhpcy5tb2RlbH0gYmluZD1cInBhc3N3b3JkXCIgcGxhY2Vob2xkZXI9XCLQn9Cw0YDQvtC70LBcIi8+XG5cdFx0XHQ8UGFzc0lucHV0IHZhbHVlPXt0aGlzLm1vZGVsfSBiaW5kPVwicHJcIiBwbGFjZWhvbGRlcj1cItCf0L7QstCw0YLRgNGP0L3QtSDQvdCwINC/0LDRgNC+0LvQsFwiLz5cblx0XHRcdDxkaXYgY2xhc3NOYW1lPVwibXlCdXR0b25cIiBvbkNsaWNrPXt0aGlzLnJlZ2lzdGVyfT7QoNC10LPQuNGB0YLRgNC40YDQsNC5PC9kaXY+XG5cdFx0PC9kaXY+KVxuXHR9XG59KSJdfQ==